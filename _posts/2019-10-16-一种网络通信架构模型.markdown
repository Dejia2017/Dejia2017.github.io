#### 一种网络通信架构模型 ADAS网络通信架构

1. 通常情况下，云平台作为通信的服务端，用于建立链接，接收数据，处理数据，并返回结果。也有云平台向设备端请求的情形，此时
云平台作为客户端。下文中的参数获取和设置请求以及预览请求的发起与停止就是这种情况。

2. 控制连接是架构中唯一的长连接，用于云平台作为客户端时的通信通道，同时也从控制连接中获取结果。系统在第一次建立的连接即为
控制连接。

3. 心跳连接是一种普通的短链接，但是一旦心跳断开，便会发生stop world,关闭所有资源。

4. 除此之外的短连接有，报警、视频、OTA、日志上传。其中视频连接稍有不同，他会首先接收一个包头，获取到视频的大小，然后持续
接收数据，直到接收完成。

5. 参数设置与请求连接从控制连接中接收和发送。预览会更复杂一些。预览首先会由云平台发送一个请求，设备端回复即代表请求成功。
接着，设备端新起一个链接用于发送数据，这个连接的持续时间由云端控制。这个过程与视频上传类似，即先建立连接，然后持续发送
数据头+图片数据的包。断开请求连接同样由云端发起，[现在的做法是从预览连接中发起断开请求，按照设计应该是从控制链接发起]。

控制链接： 注册、参数、预览建立
短连接： 心跳、预览数据【先一个请求回复包，再包头加数据】（预览断开）、日志、视频、OTA、报警。

图其实较为简单。
sdk文档更为详细，可展开写一篇博客。